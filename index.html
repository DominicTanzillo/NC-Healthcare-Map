<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>North Carolina ED Utilization Modeling</title>

    <style>
        body {
            font-family: Arial;
            padding: 20px;
            max-width: 1100px;
            margin: auto;
            line-height: 1.5;
        }

        h1, h2 {
            margin-top: 30px;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            margin-top: 20px;
        }

        select {
            padding: 6px;
            font-size: 14px;
        }

        iframe {
            width: 100%;
            height: 800px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-top: 20px;
        }

        .about-box {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }

        pre {
            background: #eee;
            padding: 12px;
            border-radius: 4px;
            border: 1px solid #ccc;
            overflow-x: auto;
        }
    </style>
</head>


<body>

    <h1>North Carolina Emergency Department Utilization Project</h1>

    <div class="about-box">
        <h2>About the Project</h2>

        <p>
        This project examines differences in emergency department utilization across
        North Carolina counties. Our aim is to identify areas that may be underserved
        due to limited primary care access or high avoidable utilization. We combined
        Medicare, Medicaid, public health, and provider supply data into a unified
        analytic dataset and applied several predictive modeling approaches.
        </p>

        <p>
        To support decision making, we generated county level and region level maps
        of predicted emergency department visits. These geographic outputs allow
        users to compare how model predictions shift across different statistical
        techniques.
        </p>

        <h2>Why Our Modeling Approach Is Strong</h2>
        <p>
        We evaluated a wide range of models: Ridge Regression, Polynomial Ridge,
        Random Forest, Gradient Boosting, Support Vector Regression, K Nearest
        Neighbors, and a Neural Network. These models capture different ways that
        demographics, chronic conditions, social factors, and provider supply
        influence emergency department utilization.
        </p>

        <p>
        Using several models allows us to confirm where patterns are consistent
        across methods. Regions that show high predicted need across multiple
        modeling approaches are strong candidates for targeted support.
        </p>

        <h2>Risk Index Construction</h2>
        <p>
        In addition to predictive modeling, we created a custom need index that
        combines availability, avoidable utilization, and underlying risk factors.
        The index captures three components described below.
        </p>

        <p><strong>1. Availability Gap</strong><br>
        This measures the ratio of public insurance enrollees to primary care
        physician supply. Public enrollees include Medicaid and Medicare Advantage.
        Primary care supply uses either physicians per 100,000 population or a
        fallback sum of Family Medicine, Internal Medicine, and Pediatrics counts.
        A higher ratio indicates limited primary care availability relative to need.
        </p>

        <p><strong>2. Avoidable Utilization Burden</strong><br>
        This is defined as emergency department visits per 1,000 public enrollees.
        Counties with high visit rates per enrollee may face gaps in routine access
        to care.
        </p>

        <p><strong>3. Underlying Population Risk</strong><br>
        We combined the Social Vulnerability Index (SVI) with the average prevalence
        of chronic conditions such as obesity, diabetes, smoking, low physical
        activity, and coronary heart disease. If SVI values exceeded 1.5 we scaled
        them to a 0 to 1 range.
        </p>

        <p><strong>Scaling and Composite Score</strong><br>
        Each component was scaled to a 0 to 100 range using min max scaling. The
        final Composite Need Score is the mean of Availability Gap, Avoidable
        Utilization Burden, and Risk Index Score. Higher values indicate greater
        relative need.
        </p>

        <h2>Medicare Data Processing</h2>
        <p>
        Medicare county level data was cleaned and standardized before being merged
        with other datasets. Numeric variables were converted from strings, county
        level rows were filtered, and key variables were renamed. The dataset used
        for modeling includes beneficiary counts, age structure, gender, race
        distribution, Medicare Advantage participation, and standardized payments.
        </p>
        <p>
        We imported the Medicare North Carolina file and converted beneficiary counts,
        Medicare Advantage enrollment, demographic percentages, and payment variables to
        numeric format. We restricted the dataset to county level entries, selected the
        key fields needed for modeling, and renamed them to a standard format. The
        resulting dataset was exported and later merged with Medicaid, chronic disease,
        SVI, and primary care supply data to build the final modeling table.
        </p>
        <p>
        The cleaned Medicare dataset was merged with Medicaid enrollment,
        chronic disease prevalence, SVI measures, and physician supply to form
        the final modeling dataset.
        </p>
    </div>


    <h2>Explore Predictive Models</h2>
    <p>Select a model and choose County or Region analysis to display the map.</p>

    <div class="controls">
        <div>
            <label for="modelSelect">Model:</label><br>
            <select id="modelSelect">
                <option value="ridge">Ridge Regression</option>
                <option value="poly_ridge_deg2">Polynomial Ridge (deg 2)</option>
                <option value="random_forest">Random Forest</option>
                <option value="gradient_boosting">Gradient Boosting</option>
                <option value="svr_linear">SVR Linear</option>
                <option value="knn">KNN</option>
                <option value="neural_network">Neural Network</option>
            </select>
        </div>

        <div>
            <label for="levelSelect">Analysis Level:</label><br>
            <select id="levelSelect">
                <option value="county">County</option>
                <option value="region">Region</option>
            </select>
        </div>
    </div>

    <iframe id="mapFrame"></iframe>

    <script>
        function updateMap() {
            const model = document.getElementById("modelSelect").value;
            const level = document.getElementById("levelSelect").value;

            const filePath = `model_maps/${model}_${level}_map.html`;
            document.getElementById("mapFrame").src = filePath;
        }

        document.getElementById("modelSelect").addEventListener("change", updateMap);
        document.getElementById("levelSelect").addEventListener("change", updateMap);

        updateMap();
    </script>

</body>
</html>
